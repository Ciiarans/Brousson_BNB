<div class="banner" id="banner">
  <video autoplay muted loop class="video-background">
    <source src="<%= asset_path('video-banner.mp4') %>" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="overlay"></div>

  <div class="content">
    <h1 class="text-light">Vivez un <strong>séjour de rêve</strong> sur la Côte Basque</h1>
    <p class="text-light">Des logements uniques, des expériences mémorables, et un service personnalisé à votre disposition.</p>
    <div class="text-center">
      <a href="#locations" class="scroll-down btn btn-outline-light p-3 rounded-4">
        <p>Explorez nos locations</p>
        <i class="fa fa-chevron-down" aria-hidden="true"></i>
      </a>
    </div>
  </div>
</div>

<section class="mb-5">
  <div class="container py-5">
    <div class="row">
      <div class="col-12">
        <h2 class="text-center p-4" style="color: $text-heading;">Nos Locations de Vacances</h2>
      </div>
    </div>
<div class="row mb-4" data-controller="datepicker">
  <div class="col-12">
    <div class="card p-4 shadow-sm rounded-4">
      <h4 class="card-title mb-3" id="filtrage">Vérifier les disponibilités</h4>
      <%= form_with(url: properties_path, method: :get, local: true) do |form| %>
        <div class="row">
          <div class="col-md-6 mb-3">
            <%= form.label :start_date, 'Date de début', class: 'form-label' %>
            <%= form.date_field :start_date, class: 'form-control rounded-3', data: { datepicker_target: "startInput" }, value: params[:start_date] %>
          </div>
          <div class="col-md-6 mb-3">
            <%= form.label :end_date, 'Date de fin', class: 'form-label' %>
            <%= form.date_field :end_date, class: 'form-control rounded-3', data: { datepicker_target: "endInput" }, value: params[:end_date] %>
          </div>
        </div>
        <%= form.submit 'Filtrer', class: 'btn btn-primary rounded-3' %>
      <% end %>
    </div>
  </div>
</div>
<div class="row g-4">
  <% @properties.each do |property| %>
    <div id="locations" class="col-md-4 mb-4">
      <div class="card rounded-5 mt-4 border-1 p-2 h-100" style="border: 1px solid $card-border;">

        <%= link_to (property.first_image.attached? ? cl_image_tag(property.first_image.key, class: "card-img-top rounded-5") : image_tag('fallback-image.png', class: "card-img-top rounded-5")), property_path(property) %>

        <div class="card-body d-flex flex-column justify-content-between h-100 mt-3">
          <div>
            <!-- Titre et adresse -->
            <h5 class="card-title" style="color: #2C3E50;"><%= property.title %></h5>
            <p class="card-text" style="color: #34495E;"><i class="fa fa-map-marker-alt"></i> <%= property.address %></p>
          </div>

          <!-- Capacité et prix en bas -->
          <div class="mt-3">
            <p class="card-text" style="color: #34495E;"><strong>Capacité :</strong> <%= property.capacity %> personnes</p>
            <p class="card-text" style="color: #34495E;"><strong>À partir de :</strong> <%= property.price_per_night.to_i %> € / nuit</p>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

</div>
</section>

<section class="why-choose-us mt-5 pb-2 pt-4" style="background-color: #2C3E50; padding: 20px;">
  <div class="container text-center">
    <div class="row">
      <div class="col-md-4">
        <i class="fas fa-user-check fa-2x mb-2" style="color: #F8F9F9;"></i>
        <h4 style="color: #F8F9F9; font-family: 'Noto Serif', serif; font-weight: 500; font-size: 1.2rem;">Service Personnalisé</h4>
        <p style="color: #EBEDEF; font-size: 0.9rem;">Bénéficiez d'un service sur-mesure, adapté à vos attentes et vos besoins spécifiques.</p>
      </div>
      <div class="col-md-4">
        <i class="fas fa-star fa-2x mb-2" style="color: #F8F9F9;"></i>
        <h4 style="color: #F8F9F9; font-family: 'Noto Serif', serif; font-weight: 500; font-size: 1.2rem;">Confort & Qualité</h4>
        <p style="color: #EBEDEF; font-size: 0.9rem;">Séjournez dans des appartements premium situés dans les meilleures localisations des Côtes Basque.</p>
      </div>
      <div class="col-md-4">
        <i class="fas fa-lock fa-2x mb-2" style="color: #F8F9F9;"></i>
        <h4 style="color: #F8F9F9; font-family: 'Noto Serif', serif; font-weight: 500; font-size: 1.2rem;">Réservation Sécurisée</h4>
        <p style="color: #EBEDEF; font-size: 0.9rem;">Votre sécurité et tranquillité d'esprit sont notre priorité absolue lors de votre réservation.</p>
      </div>
    </div>
  </div>
</section>

<section class="contact-section">
  <div class="container">
    <div class="row">
      <div class="col-md-6 contact-info">
        <h2>Contactez-nous :</h2>
        <p>Pour toute question ou demande, n'hésitez pas à nous joindre :</p>
        <ul class="contact-details">
          <li><i class="fa fa-phone"></i><a href="tel:+33 6 12 34 56 7"  class="text-decoration-none text-light">+33 6 23 81 82 03</a></li>
          <li><i class="fa fa-envelope"></i>
            <a href="mailto:contact.pat.immo@gmail.com?subject=Demande%20de%20renseignements&body=Votre%20message%20ici" class="text-decoration-none text-light">contact.pat.immo@gmail.com</a>
          </li>
          <li><i class="fa fa-map-marker"></i> 123 Rue de la Plage, Côte Basque, France</li>
        </ul>
      </div>
      <div class="col-md-6" id="form-contact">
        <div class="contact-form card p-4">
          <%= form_with(url: contact_path, method: :post, local: true) do |form| %>
            <div class="mb-3">
              <%= form.label :name, 'Nom', class: 'form-label' %>
              <%= form.text_field :name, class: 'form-control', required: true %>
            </div>
            <div class="mb-3">
              <%= form.label :email, 'Email', class: 'form-label' %>
              <%= form.email_field :email, class: 'form-control', required: true %>
            </div>
            <div class="mb-3">
              <%= form.label :message, 'Message', class: 'form-label' %>
              <%= form.text_area :message, rows: 5, class: 'form-control', required: true %>
            </div>
            <%= form.submit 'Envoyer', class: 'btn btn-primary btn-block' %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>
